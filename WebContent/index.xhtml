<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">   
<html xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:p="http://primefaces.org/ui">   
	<h:head>  
 		<title>Hello World</title>   
	</h:head>   
 
    <h:body>
    	<f:event listener="#{userLogin.handleEvent}" type="preRenderView" />
    	<f:event listener="#{productList.getProductAllList}" type="preRenderView" />
    	<p:spinner /><br></br>
    	<a href="profile.xhtml">profile</a> <br></br>
    	<a href="addproduct.xhtml">addproduct</a>
    	<h:form id="search"> 
	    	search: <h:inputText value="#{productList.keyword}"/>
	    	<h:commandButton value="search" action="#{productList.getProductListByKeyword}" >
	    		<f:ajax execute="@form" render="products:productlist" />
	    	</h:commandButton>
	    </h:form>
    	<h:form id="products">
	        <h:dataTable id="productlist" value="#{productList.productList}" var="list">
	            <h:column>
	            	<div style="width:400px;height:500px;">
		            	<h:form id="rent"> 
		               		product's name: #{list.name} <br />
		               		price: #{list.price} <br />
		         			des: #{list.description}<br />
		               		<img width="50px" height="100px" src="upload_product/#{list.photo}" /> <br />
						    <h:commandButton value="rent" action="#{productList.rentProduct(list.id,list.userid)}" rendered="#{list.userid!=profile.userid}">
						    	<f:ajax/>
						    </h:commandButton>  		
		    			</h:form>
	               	</div>
	            </h:column>
	        </h:dataTable>
    	</h:form>
    </h:body>
</html>
