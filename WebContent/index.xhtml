<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">   
<html xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:p="http://primefaces.org/ui">   
	<h:head>  
 		<title>welcome to the lendingplat</title>   
	</h:head>   
 
    <h:body>
    	<f:event listener="#{userLogin.handleEvent}" type="preRenderView" />
    	<f:event listener="#{productList.getProductAllList}" type="preRenderView" />
    	<f:event listener="#{admin.initLP}" type="preRenderView" />
    	
    	<h:form>
	    	<p:stack expanded="true">
	    		<p:menuitem value="logout" actionListener="#{userLogin.logout}"/>
			    <p:menuitem value="admin" url="admin.xhtml" rendered="#{profile.isAdmin}"/>
			    <p:menuitem value="adding" onclick="PF('addDlg').show();"/>
			    <p:menuitem value="profile" url="profile.xhtml"/>
			    <p:menuitem value="Home" url="index.xhtml"/>
			</p:stack>
		</h:form>
    	
    	<h:form id="search" style="margin-bottom:10px;width:1000px;">
    		<p:panel id="panel" header="Search Form"> 
		    	<center>
		    		<h:outputLabel value="keyword:" style="font-weight:bold" /> <h:inputText value="#{productList.keyword}"/>
		    		<p:commandButton value="search" action="#{productList.getProductListByKeyword}" update="products" />
		    	</center>
	    	</p:panel>
	    </h:form>
    	<h:form id="products" style="margin-bottom:10px;width:1000px;">
    		<p:dataScroller value="#{productList.productList}" var="list" mode="inline" scrollHeight="500">
		        <f:facet name="header">Scroll Down to Load More Prodcuts</f:facet>
		        <h:panelGrid columns="2" columnClasses="logo,detail">
		            <p:graphicImage value="upload_product/#{list.photo}" style="width:100px;height:120px;"/>
		            <p:outputPanel>
		                <h:panelGrid columns="2" cellpadding="5">
		                    <h:outputText value="Name:" />
		                    <h:outputText value="#{list.name}" style="font-weight: bold"/>
		                    <h:outputText value="Price:" />
		                    <h:outputText value="#{list.price}" style="font-weight: bold"/>
		                    <h:outputText value="Insuarnce:" />
		                    <h:outputText value="#{list.insurance}" style="font-weight: bold"/>
		                    <p:link outcome="product.xhtml?id=#{list.id}" value="click here to see detail" />
		                </h:panelGrid>
		            </p:outputPanel>
		        </h:panelGrid>
		    </p:dataScroller>
    	</h:form>
    	
    	<p:dialog header="adding product" widgetVar="addDlg" modal="true" position="center top">
    		<h:form enctype="multipart/form-data"> 
    			<h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
			    	<h:outputLabel value="name:" style="font-weight:bold" /> <h:inputText value="#{addProduct.name}"/>
			    	<h:outputLabel value="price:" style="font-weight:bold" /> <h:inputText value="#{addProduct.price}"/>
			    	<p:outputLabel value="insurance:" style="font-weight:bold" />
			    	<h:selectOneRadio value="#{addProduct.insurance}">
						<f:selectItem itemLabel="yes" itemValue="true"/>
						<f:selectItem itemLabel="no" itemValue="false"/>
					</h:selectOneRadio>
					<h:outputLabel value="select cover photo:" style="font-weight:bold" />
			    	<h:inputFile value="#{addProduct.file}" />
		    	</h:panelGrid>
		    	<p:textEditor widgetVar="editor2" value="#{addProduct.description}" height="300" style="margin-bottom:10px" placeholder="Enter your content" />
			    <h:commandButton value="submit" action="#{addProduct.addProduct}" />
		    </h:form>
		</p:dialog>   
    
    </h:body>
</html>
